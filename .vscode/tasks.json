{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Build DLL",
            "type": "shell",
            "command": "g++",
            "args": [
                "-g", // Include debug symbols
                "-shared",
                "-o",
                "knmhooker.dll",
                "src\\knmhooker.cpp",
                "-DBUILDING_DLL", // Define macro for building DLL
                "-static-libgcc", // Statically link libgcc
                "-static-libstdc++"// Statically link libstdc++
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc"
            ],
            "detail": "Compiles the knmhooker.dll shared library."
        },
        {
            "label": "Build Resources",
            "type": "shell",
            "command": "windres",
            "args": [
                "src\\resource.rc", // Include debug symbols
                "-o",
                "resource.o",
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc"
            ],
            "detail": "Compiles the resource.rc to resource.o ."
        },
        {
            "label": "Build EXE",
            "type": "shell",
            "command": "g++",
            "args": [
                "-g", // Include debug symbols
                "-o",
                "BigMouse.exe",
                "src\\BigMouse.cpp",
                "resource.o",
                "-lgdi32", // Link against gdi32 library
                "-mwindows", // Use Windows subsystem
                "-L${workspaceFolder}", // Look for libraries in the current folder
                "-lknmhooker", // Link against the knmhooker library
                "-static-libgcc", // Statically link libgcc
                "-static-libstdc++" // Statically link libstdc++
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc"
            ],
            "detail": "Compiles the main executable and links it against the DLL."
        },
        {
            "label": "Remove Dll",
            "type": "shell",
            "command": "rm",
            "args": [
                "knmhooker.dll", 
            ],
            "group": "build",
            "problemMatcher": [
            ],
            "detail": "Removes the DLL file."
        },
        {
            "label": "Build All",
            "dependsOn": [ // Run these tasks in order
                "Build DLL",
                "Build Resources",
                "Build EXE",
                //"Remove Dll"
            ],
            "dependsOrder": "sequence", // Ensure DLL is built before EXE
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "problemMatcher": [],
            "detail": "Builds the DLL and then the main executable."
        }
    ]
}